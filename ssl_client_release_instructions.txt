;; $Id$

<verno> represents the new version number. At the time of this update, the
latest version was 2.17, so the new version number would be 2.18. Substitute
2.18 everywhere you see <verno>

Administrivia:
    Make a note in checkin_notes 

    Set the version number:
        do this on a unix machine
            first, update the installer files for windows:
             % cd win_build/installer/Setup Files/Compressed Files/Language Independent/OS Independent
                <edit>  readme.txt  (change version number)
                <edit> license.txt  (change version number)
              [bonus: automate this process]

            % ./set-version <verno>
            (note: the make in your default path must be gnu make, or else
                   set-version will fail towards the end)
            % cvs ci -m 'new version'

    Make a source tarball and zip:
        % make dist  (if you have problems here, such as the make choking on
                      emacs save files, try "make -i dist")
        % cp boinc-<verno>.tar.gz boinc-<verno>.zip ~davea/boinc/doc/source/
        
Windows:
    Use the Windows computer (bart) in 329 or the Dell Celeron (skinner)in 325.

    bart: Open 'quarl' on the desktop.
    skinner: Open 'build' on the desktop.

    Open 'BOINC'

    Right click in the folder; select 'cvs update'
    resolve any M(erge) problems

    Open 'win_build'

    Open 'BOINC.dsw'

    in the visual c++ menu, pick
        Build->Clean
        Build->Rebuild All
          the exe will be in win_build\Build\Debug

    Open 'installer'

    open 'BOINC.ipr' (installshield project)

    in the installshield menu, pick
        Build->Media->Build Default Media
        [bonus: automate this process]
    
    open 'BOINC.pfw' (package for the web project)
       build everything, changing only the version numbers
       [note: there are nine screens to go through. the version
              numbers are on screen #1 and screen #9. Do not
              change anything else]
       [bonus: automate this process]

        The new windows installer (BOINC_<verno>_intelx86_windows.exe)
        will be left in this folder when you exit Package for the Web

    SFTP to boincadm@koloth:

    copy BOINC_<verno>_intelx86_windows.exe to the projects/AstroPulse_Beta/apps/boinc directory


{Linux, Solaris2.7} release:
    use these hosts:
       Linux: milhouse
       solaris2.7: milkyway

    note 1: The solaris 2.7 build should be statically linked, and should support
            solaris 2.7-2.9

    do a clean check out; compile; copy to koloth:
        % cd ~
        % mkdir proj
        % cd proj
        % mkdir client-build-`<any boinc src dir>/boinc/config.guess`
        % cd client-build-`<any boinc src dir>/boinc/config.guess`
        % cvs co boinc
        % cd boinc
        % ./configure && make
        % scp client/boinc_<verno>_*.gz boincadm@koloth:projects/AstroPulse_Beta/apps/boinc/

    [bonus: automate this process]

Mac OS X release:
    use the G3 OS X 10.2 mac in 329 (setisf2):

    note:  The mac os x build is identical to the unix/linux builds, except that
           the configure step requires the --build argument to set a generic
           host type (see below). The mac os x client will run on either os x
           10.2 or 10.3 [10.1 or earlier is not supported])

    do a clean check out; compile; copy to koloth:
        % cd ~
        % mkdir proj
        % cd proj
        % mkdir client-build-powerpc-apple-darwin
        % cvs co boinc
        % cd boinc
        % ./configure --build=powerpc-apple-darwin
        % make
        % scp client/boinc_<verno>_*.gz boincadm@koloth:projects/AstroPulse_Beta/apps/boinc/

    [bonus: automate this process]

Test the installer(s) and start the new version on each test machine.
If all is well...

Update the server:
    ssh boincadm@koloth
    cd projects/Astropulse_Beta/bin
    ./update_versions &&
    ./stop
    ./start

